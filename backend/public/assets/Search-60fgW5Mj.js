import{d as f,P as h,r as s,u as y,o as q,w as p,_ as C,c as i,a as $,b as w,e as _,F as v,g as L,h as P,i as g,j as u}from"./index-BDouZfDY.js";import{P as b,L as k}from"./Loading-stSvpWi6.js";const B=f({name:"Search",components:{ProductCard:h,Pagination:b,Loading:k},setup(){const e=s([]),n=y();let l=n.query.query;const r=s(30),d=s(0),a=s(1),t=s(!1);q(()=>{a.value=Number(localStorage.getItem("current_page"))||1,o()});const o=async()=>{t.value=!0;const c=await(await fetch(`/api/v1/products/search/${l}/${r.value}`,{headers:{"Content-Type":"application/json"}})).json();e.value=c.products.products,d.value=c.products.pages,t.value=!1};return p(()=>a.value,()=>{r.value=a.value*30}),p(()=>r.value,()=>{o()}),p(()=>n.query.query,()=>{l=n.query.query,o()}),{products:e,currentPage:a,pages:d,loading:t}}}),N={class:"container-fluid pt-5"},j={class:"row px-xl-5 pb-3"},S={class:"col-lg-3 col-md-6 col-sm-12 pb-1"};function V(e,n,l,r,d,a){const t=g("Loading"),o=g("ProductCard"),m=g("Pagination");return u(),i(v,null,[e.loading?(u(),$(t,{key:0})):w("",!0),_("div",N,[_("div",j,[(u(!0),i(v,null,L(e.products,c=>(u(),i("div",S,[P(o,{product:c},null,8,["product"])]))),256))])]),P(m,{totalPages:e.pages,currentPage:e.currentPage},null,8,["totalPages","currentPage"])],64)}const E=C(B,[["render",V]]);export{E as default};
