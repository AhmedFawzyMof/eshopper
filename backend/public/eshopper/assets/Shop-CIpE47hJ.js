import{d as j,P as $,r as a,o as V,w as v,_ as U,c as r,a as R,b as F,e as t,f as p,v as m,F as b,g as z,h as S,i as C,j as i,t as k}from"./index-Bb1Fhvs2.js";import{P as L,L as N}from"./Loading-DzEOaUgB.js";const q=j({name:"Shop",components:{ProductCard:$,Pagination:L,Loading:N},setup(){const o=a(30),e=a([]),f=a([]),y=a([]),P=a([]),g=a(0),c=a(0),u=a("all"),d=a(1),s=a(0),l=a(!1);V(()=>{d.value=Number(localStorage.getItem("current_page"))||1,h()});const h=async()=>{l.value=!0;const n=await(await fetch(`/api/v1/products/${o.value}`,{headers:{"Content-Type":"application/json"}})).json();e.value=n.products.products,s.value=n.products.pages,P.value=n.products.priceRange,f.value=n.categories,y.value=n.sizes,l.value=!1},w=async()=>{l.value=!0;const n=await(await fetch("/api/v1/products/filter",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({category:g.value,size:c.value,price:u.value,limit:o.value})})).json();s.value=n.products.pages,e.value=n.products.products,P.value=n.products.priceRange,f.value=n.categories,y.value=n.sizes,l.value=!1};return v(()=>g.value,()=>{w()}),v(()=>c.value,()=>{w()}),v(()=>u.value,()=>{w()}),v(()=>d.value,()=>{o.value=d.value*30}),v(()=>o.value,()=>{g.value!==0||c.value!==0||u.value!=="all"?w():h()}),{products:e,categories:f,selectedCategory:g,sizes:y,selectedSize:c,priceRange:P,selectedPrice:u,currentPage:d,pages:s,loading:l}}}),B={class:"container-fluid pt-5"},A={class:"row px-xl-5"},T={class:"col-lg-3 col-md-12"},D={class:"border-bottom mb-4 pb-4"},M={class:"custom-control custom-checkbox d-flex align-items-center justify-content-between mb-3"},O={class:"custom-control custom-checkbox d-flex align-items-center justify-content-between mb-3"},E=["id","value"],I=["for"],J={class:"border-bottom mb-4 pb-4"},G={class:"custom-control custom-checkbox d-flex align-items-center justify-content-between mb-3"},H={class:"custom-control custom-checkbox d-flex align-items-center justify-content-between mb-3"},K=["id","value"],Q=["for"],W={class:"mb-5"},X={class:"custom-control custom-checkbox d-flex align-items-center justify-content-between mb-3"},Y={class:"custom-control custom-checkbox d-flex align-items-center justify-content-between mb-3"},Z=["id","value"],x=["for"],ee={class:"col-lg-9 col-md-12"},te={class:"row pb-3"},oe={class:"col-lg-4 col-md-6 col-sm-12 pb-1"};function se(o,e,f,y,P,g){const c=C("Loading"),u=C("ProductCard"),d=C("Pagination");return i(),r(b,null,[o.loading?(i(),R(c,{key:0})):F("",!0),t("div",B,[t("div",A,[t("div",T,[t("div",D,[e[8]||(e[8]=t("h5",{class:"font-weight-semi-bold mb-4"},"Filter by price",-1)),t("form",null,[t("div",M,[p(t("input",{type:"radio",name:"price",class:"custom-control-input",checked:"",id:"price-all","onUpdate:modelValue":e[0]||(e[0]=s=>o.selectedPrice=s),value:"all"},null,512),[[m,o.selectedPrice]]),e[7]||(e[7]=t("label",{class:"custom-control-label",for:"price-all"}," All Price ",-1))]),(i(!0),r(b,null,z(o.priceRange,(s,l)=>(i(),r("div",O,[p(t("input",{type:"radio",name:"price","onUpdate:modelValue":e[1]||(e[1]=h=>o.selectedPrice=h),class:"custom-control-input",id:`price-${l+1}`,value:o.priceRange[l].price_range},null,8,E),[[m,o.selectedPrice]]),t("label",{class:"custom-control-label",for:`price-${l+1}`},k(s.price_range),9,I)]))),256))])]),t("div",J,[e[10]||(e[10]=t("h5",{class:"font-weight-semi-bold mb-4"},"Filter by size",-1)),t("form",null,[t("div",G,[p(t("input",{type:"radio",name:"size",class:"custom-control-input","onUpdate:modelValue":e[2]||(e[2]=s=>o.selectedSize=s),checked:"",id:"size-all",value:"0"},null,512),[[m,o.selectedSize]]),e[9]||(e[9]=t("label",{class:"custom-control-label",for:"size-all"}," All Size ",-1))]),(i(!0),r(b,null,z(o.sizes,s=>(i(),r("div",H,[p(t("input",{type:"radio",name:"size",class:"custom-control-input","onUpdate:modelValue":e[3]||(e[3]=l=>o.selectedSize=l),id:`size-${s.id}`,value:s.id},null,8,K),[[m,o.selectedSize]]),t("label",{class:"custom-control-label",for:`size-${s.id}`},k(s.size),9,Q)]))),256))])]),t("div",W,[e[12]||(e[12]=t("h5",{class:"font-weight-semi-bold mb-4"},"Filter by Category",-1)),t("form",null,[t("div",X,[p(t("input",{type:"radio",name:"category",class:"custom-control-input",checked:"","onUpdate:modelValue":e[4]||(e[4]=s=>o.selectedCategory=s),id:"category-all",value:"0"},null,512),[[m,o.selectedCategory]]),e[11]||(e[11]=t("label",{class:"custom-control-label",for:"category-all"}," All Size ",-1))]),(i(!0),r(b,null,z(o.categories,s=>(i(),r("div",Y,[p(t("input",{type:"radio",name:"category",class:"custom-control-input","onUpdate:modelValue":e[5]||(e[5]=l=>o.selectedCategory=l),id:`category-${s.id}`,value:s.id},null,8,Z),[[m,o.selectedCategory]]),t("label",{class:"custom-control-label",for:`category-${s.id}`},k(s.name),9,x)]))),256))])])]),t("div",ee,[t("div",te,[(i(!0),r(b,null,z(o.products,s=>(i(),r("div",oe,[S(u,{product:s},null,8,["product"])]))),256)),e[13]||(e[13]=t("div",{class:"col-12 pb-1"},null,-1))])])])]),S(d,{totalPages:o.pages,currentPage:o.currentPage,"onUpdate:currentPage":e[6]||(e[6]=s=>o.currentPage=s)},null,8,["totalPages","currentPage"])],64)}const ae=U(q,[["render",se]]);export{ae as default};
