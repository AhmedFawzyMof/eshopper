import{d as p,n as b,r as f,w as v,_ as y,j as c,c as u,e as t,p as g,t as i,o as _,q as C,F as $,g as w,h as P,s as k,i as m,a as q}from"./index-Bb1Fhvs2.js";const F=p({name:"CartProduct",props:{product:{type:Object,required:!0}},emits:["removeFromCart"],setup(o,{emit:s}){const n=b(),d=f(n.getProductQuantity(o.product.id)),l=()=>n.incrementQuantity(o.product.id),r=()=>n.decrementQuantity(o.product.id),e=a=>{n.removeFromCart(a),s("removeFromCart")};return v(()=>n.getProductQuantity(o.product.id),()=>{d.value=n.getProductQuantity(o.product.id)}),{quantity:d,increment:l,decrement:r,removeFromCart:e}}}),S={class:"align-middle"},j=["src","alt"],E={class:"align-middle"},Q={class:"align-middle"},T={class:"input-group quantity mx-auto",style:{width:"100px"}},L={class:"input-group-btn"},B={class:"form-control form-control-sm bg-secondary text-center"},N={class:"input-group-btn"},O={class:"align-middle"},R={class:"align-middle"};function V(o,s,n,d,l,r){return c(),u("tr",null,[t("td",S,[t("img",{src:o.product.image,alt:o.product.name,style:{width:"50px"}},null,8,j),g(" "+i(o.product.name),1)]),t("td",E,"L.E "+i(o.product.price),1),t("td",Q,[t("div",T,[t("div",L,[t("button",{class:"btn btn-sm btn-primary btn-minus",onClick:s[0]||(s[0]=(...e)=>o.decrement&&o.decrement(...e))},s[3]||(s[3]=[t("i",{class:"fa fa-minus"},null,-1)]))]),t("p",B,i(o.quantity),1),t("div",N,[t("button",{class:"btn btn-sm btn-primary btn-plus",onClick:s[1]||(s[1]=(...e)=>o.increment&&o.increment(...e))},s[4]||(s[4]=[t("i",{class:"fa fa-plus"},null,-1)]))])])]),t("td",O,"L.E "+i(o.product.price*o.quantity),1),t("td",R,[t("button",{class:"btn btn-sm btn-primary",onClick:s[2]||(s[2]=e=>o.removeFromCart(o.product.id))},s[5]||(s[5]=[t("i",{class:"fa fa-times"},null,-1)]))])])}const D=y(F,[["render",V]]),J=p({name:"Cart",components:{CartProduct:D},setup(){const o=f([]),s=b();_(()=>{n()});const n=async()=>{const r=s.getCartProducts(),a=await(await fetch("/api/v1/products/cart",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({products:r})})).json();o.value=a.products},d=C(()=>{let r=0;return o.value.forEach(e=>{const a=s.getProductQuantity(e.id);r+=e.price*a}),r});return{cartProducts:o,total:d,reCall:()=>{n()}}}}),M={class:"container-fluid pt-5"},x={class:"row px-xl-5"},z={class:"col-lg-8 table-responsive mb-5"},A={class:"table table-bordered text-center mb-0"},G={class:"align-middle"},H={class:"col-lg-4"},I={class:"card border-secondary mb-5"},K={class:"card-body"},U={class:"d-flex justify-content-between mb-3 pt-1"},W={class:"font-weight-medium"},X={class:"card-footer border-secondary bg-transparent"},Y={class:"d-flex justify-content-between mt-2"},Z={class:"font-weight-bold"};function tt(o,s,n,d,l,r){const e=m("CartProduct"),a=m("router-link");return c(),u("div",M,[t("div",x,[t("div",z,[t("table",A,[s[0]||(s[0]=t("thead",{class:"bg-secondary text-dark"},[t("tr",null,[t("th",null,"Products"),t("th",null,"Price"),t("th",null,"Quantity"),t("th",null,"Total"),t("th",null,"Remove")])],-1)),t("tbody",G,[(c(!0),u($,null,w(o.cartProducts,h=>(c(),q(e,{product:h,onRemoveFromCart:o.reCall},null,8,["product","onRemoveFromCart"]))),256))])])]),t("div",H,[t("div",I,[s[5]||(s[5]=t("div",{class:"card-header bg-secondary border-0"},[t("h4",{class:"font-weight-semi-bold m-0"},"Cart Summary")],-1)),t("div",K,[t("div",U,[s[1]||(s[1]=t("h6",{class:"font-weight-medium"},"Subtotal",-1)),t("h6",W,"L.E "+i(o.total),1)]),s[2]||(s[2]=t("div",{class:"d-flex justify-content-between"},[t("h6",{class:"font-weight-medium"},"Shipping"),t("h6",{class:"font-weight-medium"},"L.E 10")],-1))]),t("div",X,[t("div",Y,[s[3]||(s[3]=t("h5",{class:"font-weight-bold"},"Total",-1)),t("h5",Z,"L.E "+i(o.total+10),1)]),P(a,{to:"/eshopper/checkout",class:"btn btn-block btn-primary my-3 py-3"},{default:k(()=>s[4]||(s[4]=[g(" Proceed To Checkout ")])),_:1})])])])])])}const ot=y(J,[["render",tt]]);export{ot as default};
